<div class="productos">
    <div class="card">
        <div class="card-body">
            <div class="agregarProducto">
                <h3 *ngIf="router.url.includes('ver')" class="card-title">Ver detalle de compra <b>N°
                        {{numeroCompra}}</b></h3>
                <h3 *ngIf="router.url.includes('editarVenta')" class="card-title">Editar estado de compra <b>N°
                        {{numeroCompra}}</b></h3>
            </div>
            <div class="form-container">
                <form action="" [formGroup]="saleForm">
                    <fieldset [disabled]="router.url.includes('ver')">
                    <div class="inputsText">
                        <span class="title-input">Productos comprados</span>
                        <div class="productCarrito">
                        <div *ngFor="let product of saleForm.get('carrito.products')?.value; let i = index">
                            <div [formGroupName]="i">
                                <div class="card" style="width: 18rem;">
                                    <div class="card-header">
                                        <b>{{product.name}}</b>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <ul class="col-6 list-group list-group-flush">
                                                <li class="list-group-item">Cantidad</li>
                                                <li class="list-group-item">Precio</li>
                                                <li class="list-group-item"><b>Subtotal</b></li>
                                            </ul>
                                            <ul class="col-6 list-group list-group-flush">
                                                <li class="list-group-item">{{product.cantidad}}</li>
                                                <li class="list-group-item">{{product.price}}</li>
                                                <li class="list-group-item"><b>$ {{product.cantidad * product.price}}</b></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div></div>
                    </div>
                    <div class="inputsText">
                        <span class="title-input">Total de la compra</span>
                        <div class="totalCompra">
                            <b>$ {{totalCompra}}</b>
                        </div>
                    </div>
                    <div class="inputsText">
                        <span class="title-input">Estado</span>
                        <select class="selectForm" formControlName="state">
                            <option *ngFor="let state of stateIds" [value]="state.id">{{state.name}}</option>
                        </select>
                        <div *ngIf="saleForm.controls['state'].errors && saleForm.get('state')?.touched">
                            <div class="validatorText" *ngIf="saleForm.get('state')?.hasError('required')">
                                <span>Este campo es requerido.</span>
                            </div>
                        </div>
                    </div>
                </fieldset>
                </form>
            </div>
        </div>
    </div>
    <div class="login-register">
        <a (click)="cancelar()">Volver</a>
        <button class="btn btn-primary btn-login" *ngIf="router.url.includes('editarVenta')"
            [disabled]="saleForm.invalid" (click)="editar(numeroCompra)">
            Guardar cambios</button>
    </div>
</div>